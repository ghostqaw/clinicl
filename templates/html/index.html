<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Клиники г.Алматы{% endblock title %}</title>
    <style>
        /* Стили для рамки карты */
        body {
            background: url('../../media/Bacground.jpg'); /* Путь к изображению */
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            margin: 0; /* Убедитесь, что отступов нет, если они не нужны */
            min-height: 100%; /* Минимальная высота равна высоте видимой части экрана */
            min-width: 100%;
        }

        .background-content {
            min-height: 100%;
        }
        #hamburger {
    display: flex;
    align-items: center;  /* Center vertically */
    justify-content: center;  /* Center horizontally */
    height: 100%;  /* Take full height to align properly */
}
        #hamburger {
    position: relative;
    top: -30px;  /* Adjust this value to move the logo upwards */
}
        .top-panel {
            background: rgba(19, 35, 47, 0.9);
            padding: 8px;
            max-width: 100%;
            border-radius: 0px;
            box-shadow: 0 4px 10px 4px rgba(19, 35, 47, 0.3);
            display: flex;
            justify-content: space-between; /* Разместить элементы по краям */
            align-items: center; /* Выравнивание по вертикали по центру */
            border: 1.5px solid #0b520e;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
        }

        .search-container {
            font-size: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            margin-right: 10px;
        }

        .search-container input[type="text"] {
            font-size: 15px;
            padding: 4px 8px;
            background: none;
            border: 1.5px solid #a0b3b0;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
            width: 500px; /* Измените эту ширину по желанию */
            border-radius: 8px;
            text-align: center;
            color: white;
        }

        .search-container input[type="text"]::placeholder {
            color: white;
        }

        /* Добавляем прямой слеш при фокусировке на поле ввода */
        .search-container input[type="text"]:focus::before {
            content: "/";
            position: absolute;
            left: 10px;
            color: white;
        }


        .button-container {
            display: flex; /* Размещаем кнопки в ряд */
        }

        .button-container a {
            position: relative; /* Относительное позиционирование для псевдоэлементов */
            border: none;
            outline: none;
            cursor: pointer;
            padding: 4px 8px;
            margin-right: -4px; /* Убираем пробел между кнопками */
            font-size: 15px;
            background-color: rgba(19, 35, 47, 0.9);;
            color: #fff;
            transition: background-color 0.3s ease, color 0.3s ease; /* Добавляем цветовую анимацию */
            white-space: nowrap;
            border-radius: 0; /* Устанавливаем начальный радиус скругления 0 */
        }

        .button-container a:hover {
            background-color: #13a178; /* Яркий белый цвет при наведении */
            color: #fff; /* Зеленый цвет текста при наведении */
        }

        .user-menu {
            color: white;
            cursor: pointer;
            font-size: 17px;
        }

        .user-menu:hover {
            background: #1ab188;
            color: #fff;
            height: 23px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: rgba(19, 35, 47, 0.9);;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
            border: 1.5px solid #0b520e;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
        }

        .dropdown-content a {
            color: #ffffff;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 17px;
        }


        .dropdown-content a:hover {
            background-color: #13a178;
        }
        

        {% block extra_styles %}
            #map-container {
                position: relative;
                width: 98.3vw; /* Ширина рамки */
                height: 85vh; /* Высота рамки */
                margin: 8px auto; /* Отступы сверху и снизу для центрирования по вертикали */
                border: 8px solid #06ad0d; /* Стиль и цвет рамки */
                border-radius: 8px; /* Скругление углов рамки */
                overflow: hidden; /* Скрытие контента, выходящего за рамку */
                float: right;
                vertical-align: top; /* Выравнивание по правому краю */
                max-width: 100%;
            }

            #map {
                width: 98.3vw; /* Ширина карты */
                height: 75vh; /* Высота карты */
                position: absolute; /* Абсолютное позиционирование */
                max-width: 100%;
            }
        {% endblock %}

        .sidebar {
            width: 100vw;
            height: 200vh;
            float: left;
            background: rgba(19, 35, 47, 0.9);
            padding: 0;
            max-width: 100%;
            border-radius: 0;
            box-shadow: 0 4px 10px 4px rgba(19, 35, 47, 0.3);
            font-size: 20px;
            color: white;
            position: relative;
            border: 1.5px solid #0b520e;
            margin-bottom: 0;
            border-bottom: 0;
             border-top: 0;
        }
        
    .end-content {
        width: 100%;
            display: inline-block;
            background: rgba(0, 22, 40, 0.9);
            font-size: 25px;
            color: white;
            position: relative;
            min-width: 100%;
        }
.footer-container {
  display: flex;
  align-items: flex-start;
    font-family: 'Arial', sans-serif;
}

.menu-section, .social-section {
  display: flex;
  flex-direction: column;
  margin: 0 17vw; /* Добавляем небольшой отступ с обеих сторон */
}

.menu-section h3, .social-section h3 {
  font-size: 1em; /* Установите необходимый размер шрифта для заголовков */
  color: #b9b9b9; /* Белый цвет текста для заголовков */
  margin-bottom: 0.5em; /* Отступ снизу у заголовков */
}

.menu-section ul, .social-section ul {
  list-style: none;
    font-size: 0.8em;
  padding: 0.1em;
  margin: 0;
}
.menu-section li , .social-section li  {
  margin-bottom: 0.4em; 
}
.menu-section li a, .social-section li a {
  color: #9d9d9d; /* Белый цвет текста для пунктов списка */
    cursor: pointer;
    text-decoration: none;
}
.menu-section li a:hover, .social-section li a:hover  {
  color: #0af814;
    text-decoration: underline;
}
    .solid-line {
    border-top: 1px solid #b9b9b9; /* Replace with the color you want */
    margin-top: 0.4em;  /* Adjust the margin as needed */
    margin-bottom: 0.4em;  /* Adjust the margin as needed */
}
.educational-disclaimer p{
  color: #9d9d9d; 
    text-align: center;
    font-size: 0.7em;
    margin: 0;
}
    .img-logo {
    width: 10vw; /* or any size */
    height: auto; /* maintain aspect ratio */
}

    
@media only screen and (max-width: 768px) {
  /* Устанавливаем ширину всех основных контейнеров на 100% */
  #map, #map-container, .end-content {
    width: 100%;
    max-width: 100%; /* Убираем максимальную ширину, если она была задана */
    float: none; /* Убираем обтекание */
    margin: 0 auto; /* Убираем внешние отступы и выравниваем по центру */
    padding: 0; /* Обнуляем внутренние отступы */
    box-shadow: none; /* Убираем тени, если они есть */
    border: none; /* Убираем рамки */
    overflow: hidden; /* Обрезаем содержимое, выходящее за пределы элемента */
    position: relative; /* Убедитесь, что позиционирование не нарушает поток */
  }
    .sidebar{
        width: 100%;
    float: none;
    max-width: none;
    height: auto; /* Если вы хотите, чтобы высота была автоматически расчитана */
    padding: 0; /* Если требуется сбросить внутренние отступы */
    margin: 0 auto; 
        border: none;
        overflow: hidden;
    }

  .display-flex-colm {
    flex-direction: column;
  }
  
  .text-and-image {
    width: 100%;
  }
  .arrow-wrapper{
      
  }
  
  #attach {
    width: 100%;
    margin: 0;
    padding: 0;
    height: auto;
  }
  
  .text-and-image img {
    width: 50px; /* Это заставит изображение масштабироваться и подстраиваться под ширину блока */
    height: 50px; /* Это сохранит пропорции изображения */
  }
  .search-container input[type="text"] {
    width: calc(100% - 16px); /* Учитываем padding */
    margin: 0 8px; /* Добавляем небольшой внешний отступ с боков */
  }

  .dropdown-content {
    width: 100%; /* Раскрывающееся меню на всю ширину */
  }

  /* Для изображений */
  .img-logo {
    width: 80%; /* Уменьшаем размер логотипа на мобильных */
    height: auto; /* Сохраняем пропорции */
    display: block; /* Убедитесь, что логотип блочный */
    margin: 0 auto; /* Выравниваем по центру */
  }

  /* Стили для футера */
  .footer-container, .menu-section, .social-section {
    flex-direction: column; /* Стекаем элементы вертикально */
    margin: 0 auto; /* Выравниваем по центру */
  }

  .menu-section ul, .social-section ul {
    padding: 0; /* Обнуляем padding */
  }

  .menu-section li, .social-section li {
  }
  .top-panel {
    flex-wrap: wrap; /* Позволяет элементам переноситься на новую строку */
    justify-content: space-between; /* Распределяет пространство между элементами */
  }

  /* Меню будет располагаться по левому краю */
  #hamburger, .search-container{
    order: 1; /* Первый в потоке */
    justify-content: center; /* Центрирует поле поиска */
    margin-top: 0; /* Добавляет отступ сверху */
  }
  

  /* Кнопки Войти и Регистрация будут в отдельной строке */
  .button-container {
    order: 3; /* Третий в потоке */
    width: 100%; /* Занимает всю ширину строки */
    justify-content: center; /* Центрирует кнопки */
    margin-top: 10px; /* Добавляет отступ сверху */
  }

  .button-container a {
    margin-right: 10px; /* Добавляет отступ между кнопками */
  }
  nav.clear {
  top: 70px;
  margin-left: -70%; /* This might need to be changed to 0 when the menu is active */
  z-index: 2;
  width: 70%; /* Adjust the width to ensure enough space for text */
  height: 100%;
  background: rgba(19, 35, 47, 0.9);
  overflow-x: hidden; /* Ensure that horizontal scroll does not appear */
  overflow-y: auto; /* Enable vertical scrolling if the menu is longer than the screen */
}

nav ul {
  list-style: none;
  padding-left: 0; /* Ensure padding does not affect the width */
}

nav li a {
  white-space: nowrap; /* This will ensure the text does not wrap and stays in one line */
  overflow: hidden; /* This will hide text that overflows the width of 'nav li a' */
  text-overflow: ellipsis; /* This will add '...' at the end of the text that overflows */
  display: block; /* This makes the 'a' tag a block element, allowing 'overflow' and 'text-overflow' to work */
  width: 100%; /* This makes sure the 'a' tag takes up the full width of its parent 'li' */
  box-sizing: border-box; /* This ensures that padding and borders are included in the width */
    font-size: 15px;
}
nav ul li {
    position: relative;
    border-bottom: 1px solid #ffffff; 
}
nav ul li:last-child {
    border-bottom: none;
}
}


#attach {
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center; 
  width: 48%;
    height: 25vh;
  margin: 20px;
  padding: 10px;
  background-color: #070761;
  transition: all 0.3s ease;
  box-sizing: border-box;
  position: relative; /* Added for pseudo-elements positioning */
  overflow: hidden; /* Hide the overflowing parts of the pseudo-elements */
}

#attach:before,
#attach:after,
#attach div:before,
#attach div:after {
  content: '';
  position: absolute;
  background-color: #FFFFFF;
  z-index: 10;
  transition: all 0.3s ease;
}

/* Top and bottom borders */
#attach:before { top: 0; left: 50%; width: 0; height: 1px; }
#attach:after { bottom: 0; right: 50%; width: 0; height: 1px; }

/* Left and right borders */
#attach div:before { top: 50%; left: 0; width: 1px; height: 0; }
#attach div:after { bottom: 50%; right: 0; width: 1px; height: 0; }

#attach:hover:before { left: 0; width: 100%; transition: width 0.6s ease-in-out; }
#attach:hover:after { right: 0; width: 100%; transition: width 0.6s ease-in-out; }

#attach:hover div:before { top: 0; height: 100%; transition: height 0.6s ease-in-out 0.6s; }
#attach:hover div:after { bottom: 0; height: 100%; transition: height 0.6s ease-in-out 0.6s; }

.arrow-wrapper {
  transition: transform 0.3s ease; /* Smooth transition for the arrow */
}

#attach:hover .arrow-wrapper {
  transform: translateX(10px); /* Moves arrow to the right on hover */
}

/* Additional styling for text and image layout */
.text-and-image {
  display: flex;
  align-items: center;
  color: white; /* Text color */
}

.text-and-image img {
  margin-right: 20px;
}

.arrow-svg {
  fill: white; /* SVG color */
  min-width: 50px; /* Set a min-width for the svg */
}
    .modal {
    display: none; /* Скрыто по умолчанию */
    position: fixed; /* Оставайтесь на месте */
    left: 0;
    top: 0;
    width: 100%; /* Полная ширина */
    height: 100%; /* Полная высота */
    overflow: auto; /* Включите прокрутку, если нужно */
    background-color: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
    z-index: 1000; /* Убедитесь, что модальное окно находится над другими элементами */
    }

    .modal-content {
    background: rgba(19, 35, 47, 0.9);
    padding: 20px;
    width: 40%;
    margin: 80px auto;
    border-radius: 8px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modern font */
    color: #fff;
    position: relative;
    border: 2px solid #0b520e;
    transition: all 0.25s ease;
    height: auto;
    }
    .modal-content i {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    color: white;
    font-size: 30px;
    font-weight: bolder;
    }

    .modal-content i:hover {
    color: lawngreen;
    font-size: 38px;
    }
.top-panel-first {
    background: rgba(160, 179, 176, 0.34);
    width: 100%; /* Занимает всю ширину */
    height: 4vh;
    border-radius: 0px;
    box-shadow: 0 4px 10px 4px rgba(19, 35, 47, 0.3);
    border: 1.5px solid #0b520e;
    transition: border-color 0.25s ease, box-shadow 0.25s ease;
    display: flex;
    align-items: center; /* Выравнивание элементов по вертикали */
    justify-content: space-around; /* Равномерное распределение элементов */
}

.top-menu-link {
    cursor: pointer;
    font-size: 17px;
    color: #fff;
    padding: 10px;
    overflow: hidden;
    position: relative;
    transition: color 0.3s;
}
.footer-links {
    display: flex;
    width: 100%; /* Занимает всю ширину контейнера .top-panel-first */
    justify-content: space-around; /* Равномерное распределение ссылок */
    list-style: none; /* Убирает стили списка, если это <ul> */
    padding: 0; /* Убирает стандартные отступы */
}
.top-menu-link::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(to left, rgba(0,255,0,0), rgba(50,205,50,0.75), rgba(0,255,0,0));
    animation: flameRise 0.75s ease-in-out forwards;
    display: none;
}

.top-menu-link:hover::after {
    display: block;
}

@keyframes flameRise {
    0% { top: 100%; height: 2px; }
    100% { top: 0; height: 100%; }
}
   .faq-container {
    margin: 20px;
    background-color: #2c3e50;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.faq-item {
    border-bottom: 1px solid #34495e;
    cursor: pointer;
}

.faq-item:last-child {
    border-bottom: none;
}

.faq-question {
    padding: 20px;
    color: #ecf0f1;
    font-size: 18px;
    font-weight: bold;
    position: relative;
}

.faq-answer {
    padding: 20px;
    color: #ffffff;
    display: none;
    font-size: 16px;
    line-height: 1.6;
    background-color: #2b3a4a;
    border-top: 1px solid #263543;
}
 .news-list {
    display: flex;
    flex-direction: column;
}

.news-item {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #eee;
    padding: 10px 0;
}

.news-icon img {
    width: 300px;
    height: 180px;
    margin-right: 10px;
}

.news-info h3 {
    margin: 0;
    color: #89e38f;
}

.news-info p {
    font-size: 18px;
    color: #b9b9b9;
}
#editor-container {
  height: 300px;
  background-color: white; /* Белый фон редактора */
  border: 1px solid #ccc; /* Граница вокруг редактора */
  font-family: 'Arial', sans-serif; /* Шрифт текста в редакторе */
    color: black;
    font-size: 15px;
}


.rating {
    display: flex;
    justify-content: flex-start;
    margin: 10px 0;
}

.star {
    cursor: pointer;
    font-size: 50px;
    color: #ccc;
    margin-right: 5px;
}

.star:hover{
    color: gold;
}
#submitFeedback {
        background: rgba(160, 179, 176, 0.25);
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 20px;
        margin: 10px 10px;
        cursor: pointer;
        border-radius: 5px;
        transition: background 0.3s;
        white-space: nowrap;
        width: calc(100% - 20px);
    }
    #submitFeedback:hover {
        background: #1ab188; /* Темнее зеленый при наведении */
    }
/* Стили для слайдера */
.news-tips-slider {
    position: relative;
    width: 100%;
    height: auto;
    overflow: hidden;
}

.slide-container {
    opacity: 0; /* Начальное состояние: слайды невидимы */
    transform: translateY(50px); /* Немного смещаем вниз для эффекта появления */
    transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
}

.slide {
    position: relative;
    width: 100%;
    height: 370px;
    background-size: cover;
    background-position: center;
}

.slide-content {
    position: absolute;
    bottom: 20px;
    left: 20px;
    color: white;
    background-color: rgba(0, 0, 0, 0.6);
    padding: 20px;
    border-radius: 8px;
}

/* Анимация появления */
@keyframes slideInLeft {
    from { transform: translateX(-100%); }
    to { transform: translateX(0); }
}

@keyframes slideInRight {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
}

.slide-container:nth-child(odd) .slide {
    animation: slideInLeft 1s forwards;
}

.slide-container:nth-child(even) .slide {
    animation: slideInRight 1s forwards;
}
.visible {
    opacity: 1;
    transform: translateY(0);
}

    </style>
<link rel="icon" href="/media/tab-icon.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</head>
<body>
<div class="background-content">
<div class="top-panel" style="height: 60px;">
    <div id="hamburger">
        <img src="/media/img_6.png" style="width: 85px; height: 85px;">
    </div>
    <div class="search-container">
        <label>
            <input type="text" placeholder="Поиск по сайту">
        </label>
    </div>

    <div class="button-container">
        {% if user.is_authenticated %}
            <div class="user-menu" onclick="toggleMenu()" onmouseleave="closeMenu()">
                <span class="user-name" style="font-size: 20px;"><i class="fas fa-user">
                    
                </i> {{ user.full_name }} {{ user.first_name }} {{ user.last_name }}: {{ user.iin }}</span>
                <div id="dropdown" class="dropdown-content">
                   {% if user.is_doctor %}
                    <a href="{% url 'doctor-profile-link' %}"><i class="fas fa-user-circle"></i> Личный кабинет</a>
                {% else %}
                    <a href="{% url 'profile_link' %}"><i class="fas fa-user-circle"></i> Личный кабинет</a>
                {% endif %}
                    <a href="#notifications"><i class="fas fa-bell"></i> Уведомления </a>
                    <form action="{% url 'logout' %}" method="post" id="logout-form" style="display:none;">
                        {% csrf_token %}
                        <input type="submit" value="Выйти" style="display:none;">
                    </form>
                    <a href="#" onclick="document.getElementById('logout-form').submit();"><i
                            class="fas fa-sign-out-alt"></i> Выйти</a>
                </div>
            </div>
        {% else %}
            <a href="{% url 'login-signup' %}?tab=login" class="tab login">Войти</a>
            <a href="{% url 'login-signup' %}?tab=signup" class="tab signup">Регистрация</a>
        {% endif %}
    </div>
</div>
<div class="top-panel-first">
    <div class="footer-links">
        <div class="top-menu-link" onclick="openModal('termsModal')">Пользовательское соглашение</div>
        <div class="top-menu-link" onclick="openModal('privacyModal')">Политика конфиденциальности</div>
        <div class="top-menu-link" onclick="openModal('tipsModal')">Советы и рекомендации</div>
        <div class="top-menu-link" onclick="openModal('faqModal')">Часто задаваемые вопросы</div>
        <div class="top-menu-link" onclick="openModal('newsModal')">Новости и обновления</div>
        <div class="top-menu-link" onclick="openModal('feedbackModal')">Обратная связь</div>
    </div>
</div>

<!-- Модальные окна для каждого пункта -->
<div id="termsModal" class="modal">
    <div class="modal-content">
                    <i id="close-modal" class="far fa-window-close" onclick="closeModal('termsModal')"></i>
        <span class="close" onclick="closeModal('termsModal')"></span>
        <h1 style="text-align: center; color: #13a178">Информация о пользовательском соглашении.</h1>

    <h2>1. Общие положения</h2>
    <p><strong>1.1. Описание сервиса</strong><br>
    "Мед-Портал Алматы" (далее - "Сервис") представляет собой интерактивную платформу для пользователей, позволяющую прикрепляться к медицинским учреждениям города Алматы, записываться на прием к врачам, просматривать результаты анализов и управлять личной медицинской информацией, включая идентификационные данные (ИИН).</p>
    <p><strong>1.2. Подтверждение согласия</strong><br>
    Используя Сервис, Вы подтверждаете свое согласие с условиями данного Соглашения. Если Вы не согласны с условиями, необходимо прекратить использование Сервиса.</p>

    <h2>2. Условия регистрации и учетной записи</h2>
    <p><strong>2.1. Регистрация в сервисе</strong><br>
    Регистрация на Сервисе требует предоставления персональных данных, включая, но не ограничиваясь, ИИН, имя, фамилия, контактный номер телефона, и электронная почта. Все предоставленные данные должны быть актуальны и точны.</p>
    <p><strong>2.2. Конфиденциальность и безопасность</strong><br>
    Пользователь несет ответственность за конфиденциальность своих регистрационных данных, включая пароль. Все действия, совершенные с использованием учетной записи пользователя, признаются действиями самого пользователя.</p>

    <h2>3. Права и обязанности сторон</h2>
    <p><strong>3.1. Обязанности пользователя</strong><br>
    - Использовать Сервис только для законных целей в соответствии с законодательством РК.<br>
    - Не использовать Сервис для распространения вирусов, вредоносных программ, или иных технологий, которые могут навредить Сервису или интересам других пользователей.<br>
    - Не осуществлять попытки несанкционированного доступа к другим учетным записям, компьютерным системам или сетям, подключенным к Сервису.</p>
    <p><strong>3.2. Права сервиса</strong><br>
    - Вносить изменения в условия Соглашения без предварительного уведомления. Продолжение использования Сервиса после внесения изменений означает согласие пользователя с обновленными условиями.<br>
    - Ограничивать доступ к Сервису для отдельных пользователей, а также прекращать или приостанавливать работу Сервиса по своему усмотрению.</p>

    <h2>4. Ответственность сторон</h2>
    <p><strong>4.1. Ограничение ответственности</strong><br>
    Сервис стремится обеспечить высокий уровень доступности и надежности своих услуг, но не гарантирует абсолютную безошибочность своей работы.</p>

    <h2>5. Заключительные положения</h2>
    <p><strong>5.1. Юрисдикция и разрешение споров</strong><br>
    Все возможные споры из Соглашения или в связи с ним подлежат разрешению в соответствии с законодательством Республики Казахстан.</p>
    </div>
</div>
<div id="privacyModal" class="modal">
    <div class="modal-content">
                            <i id="close-modal" class="far fa-window-close" onclick="closeModal('privacyModal')"></i>
        <span class="close" onclick="closeModal('privacyModal')"></span>
        <h2 style="text-align: center; color: #13a178; font-size: 30px">Детали нашей политики конфиденциальности.</h2>
         <h2>1. Введение</h2>
    <p>Эта Политика конфиденциальности описывает, как "Мед-Портал Алматы" собирает, использует и защищает личные данные пользователей, зарегистрированных на платформе.</p>

    <h2>2. Сбор личной информации</h2>
    <p>При регистрации на Сервисе, пользователи предоставляют следующие данные:</p>
    <ul>
        <li>ИИН;</li>
        <li>Имя и фамилия;</li>
        <li>Электронная почта;</li>
        <li>Контактный телефон.</li>
    </ul>
    <p>Эта информация необходима для предоставления доступа к функциям Сервиса.</p>

    <h2>3. Использование информации</h2>
    <p>Собранная информация используется для:</p>
    <ul>
        <li>Идентификации пользователя в системе;</li>
        <li>Предоставления доступа к медицинским услугам;</li>
        <li>Уведомления о изменениях в Сервисе или в условиях предоставления услуг.</li>
    </ul>

    <h2>4. Защита информации</h2>
    <p>Сервис применяет различные технические и организационные меры для защиты личных данных пользователей, включая, но не ограничиваясь, шифрование данных и контроль доступа.</p>

    <h2>5. Права пользователей</h2>
    <p>Пользователи имеют право на доступ к своим личным данным, их исправление, удаление или ограничение обработки. Также пользователи могут в любой момент отозвать согласие на обработку своих данных.</p>

    <h2>6. Изменения в политике конфиденциальности</h2>
    <p>Сервис оставляет за собой право вносить изменения в Политику конфиденциальности. Все изменения будут опубликованы на данной странице. Продолжение использования Сервиса после внесения изменений означает согласие пользователя с обновленной политикой.</p>

    <h2>7. Контактная информация</h2>
    <p>По всем вопросам, связанным с обработкой и защитой личных данных, пользователи могут обратиться по адресу электронной почты support@med-portal-almaty.kz.</p>
    </div>
</div>
<div id="tipsModal" class="modal">
    <div class="modal-content">
                                    <i id="close-modal" class="far fa-window-close" onclick="closeModal('tipsModal')"></i>
        <span class="close" onclick="closeModal('tipsModal')"></span>
        <h2 style="text-align: center; color: #13a178; font-size: 30px">Полезные советы для вашего здоровья и благополучия.</h2>
        <h2>1. Правильное питание</h2>
    <p>Поддержание сбалансированного рациона является ключом к хорошему здоровью. Включите в свой рацион больше фруктов, овощей, цельнозерновых продуктов, белков и здоровых жиров.</p>

    <h2>2. Регулярные физические упражнения</h2>
    <p>Регулярные упражнения помогают поддерживать физическую форму, улучшают настроение и уменьшают риск развития множества заболеваний. Стремитесь к минимум 30 минутам умеренной активности большинство дней недели.</p>

    <h2>3. Достаточный сон</h2>
    <p>Качественный сон крайне важен для общего здоровья. Взрослым рекомендуется получать не менее 7-8 часов сна каждую ночь.</p>

    <h2>4. Управление стрессом</h2>
    <p>Научитесь управлять стрессом с помощью релаксационных техник, таких как медитация, дыхательные упражнения и йога. Это может помочь снизить риск развития хронических заболеваний.</p>

    <h2>5. Регулярные медицинские осмотры</h2>
    <p>Регулярные визиты к врачу для профилактических осмотров и скрининга заболеваний помогут обнаружить потенциальные проблемы на ранних стадиях, когда их лечение наиболее эффективно.</p>

    <h2>6. Профилактика заболеваний</h2>
    <p>Соблюдение рекомендаций по вакцинации и регулярное мытье рук являются эффективными способами предотвращения многих инфекционных заболеваний.</p>

    <h2>7. Информированность о состоянии здоровья</h2>
    <p>Используйте доступные вам инструменты и ресурсы для мониторинга вашего здоровья, такие как приложения для отслеживания физической активности, диеты и качества сна.</p>

    </div>
</div>
<div id="faqModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('faqModal')"></span>
                                            <i id="close-modal" class="far fa-window-close" onclick="closeModal('faqModal')"></i>

        <h2 style="text-align: center; color: #13a178; font-size: 30px">Ответы на часто задаваемые вопросы.</h2>
            <div class="faq-item">
                <div class="faq-question">Как войти в систему?</div>
                <div class="faq-answer">Для входа в систему необходимо нажать на кнопку "Войти", расположенную в верхней части экрана, и ввести свои учетные данные. Если у вас еще нет аккаунта, вы можете зарегистрироваться, выбрав опцию "Регистрация".</div>
            </div>
            <div class="faq-item">
                 <div class="faq-question">Как прикрепиться к поликлинике?</div>
                <div class="faq-answer">Для прикрепления к поликлинике выберите раздел "Прикрепление к поликлинике" в меню, затем выберите нужную клинику из списка и следуйте инструкциям для завершения процесса прикрепления.</div>
            </div>
            <div class="faq-item">
                 <div class="faq-question">Как записаться к врачу?</div>
                <div class="faq-answer">Перейдите в раздел "Запись к врачу", выберите специальность врача, удобное для вас время и подтвердите запись. Вы получите подтверждение записи по электронной почте или SMS.</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Где посмотреть результаты анализов?</div>
                <div class="faq-answer">Результаты анализов доступны в вашем личном кабинете. Перейдите в раздел "Результаты анализов", где будут отображены все доступные результаты с датами проведения исследований.</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Как изменить персональные данные?</div>
                <div class="faq-answer">Для изменения персональных данных перейдите в раздел "Личный кабинет", где вы сможете редактировать информацию о себе, такую как контактные данные, пароль и другие.</div>
            </div>
         <div class="faq-item">
        <div class="faq-question">Как войти в систему?</div>
        <div class="faq-answer">Для входа в систему нажмите на кнопку "Войти" в верхнем правом углу экрана и введите свои учетные данные.</div>
    </div>
    <div class="faq-item">
        <div class="faq-question">Как прикрепиться к поликлинике?</div>
        <div class="faq-answer">Выберите в меню опцию "Прикрепление к поликлинике", затем следуйте инструкциям для выбора клиники и подтверждения прикрепления.</div>
    </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
    $('.faq-question').click(function() {
        $(this).next('.faq-answer').slideToggle(200);
        $(this).parent().siblings().children('.faq-answer').slideUp(200); // Закрыть другие ответы
    });
});
    </script>
</div>
<div id="newsModal" style="width: 100vw" class="modal">
    <div class="modal-content">
        <i id="close-modal" class="far fa-window-close" onclick="closeModal('newsModal')"></i>
        <span class="close" onclick="closeModal('newsModal')"></span>
        <h2 style="text-align: center; color: #13a178; font-size: 30px">Последние новости и обновления сервиса.</h2>
        <div class="news-list">
            <div class="news-item">
                <div class="news-icon">
                    <img src="/media/img_4.png" alt="ЕГОВ">
                </div>
                <div class="news-info">
                    <h3>Интеграция с EGOV</h3>
                    <p>Теперь вы можете прикрепиться к поликлинике прямо через наш портал с использованием вашего цифрового ИИН.</p>
                </div>
            </div>
            <div class="news-item">
                <div class="news-icon">
                    <img src="/media/img_3.png" alt="Запись к врачу">
                </div>
                <div class="news-info">
                    <h3>Онлайн запись к врачам</h3>
                    <p>Запишитесь к врачу не выходя из дома. Пользуйтесь удобным интерфейсом выбора специалиста и времени визита.</p>
                </div>
            </div>
            <div class="news-item">
                <div class="news-icon">
                    <img src="/media/img_5.png" alt="Управление данными">
                </div>
                <div class="news-info">
                    <h3>Управление медицинскими данными</h3>
                    <p>Все ваши медицинские данные теперь собраны в одном месте. Вы можете просматривать историю болезней, результаты анализов и текущие назначения врачей.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="feedbackModal" class="modal">
    <div class="modal-content">
                <i id="close-modal" class="far fa-window-close" onclick="closeModal('feedbackModal')"></i>
        <span class="close" onclick="closeModal('feedbackModal')"></span>
        <h2 style="text-align: center; color: #13a178; font-size: 30px">Оставьте свой отзыв или предложение для улучшения нашего сервиса.</h2>
        <form id="feedbackForm">
            <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<div id="editor-container"></div>
            <div class="rating">
                <label class="star" data-value="1">&#9733;</label>
                <label class="star" data-value="2">&#9733;</label>
                <label class="star" data-value="3">&#9733;</label>
                <label class="star" data-value="4">&#9733;</label>
                <label class="star" data-value="5">&#9733;</label>
            </div>
            <input type="button" id="submitFeedback" onclick="submitFeedback()" value="Отправить">
        </form>
        <script>
  var quill = new Quill('#editor-container', {
    modules: {
      toolbar: [
        [{ header: [1, 2, false] }],
        ['bold', 'italic', 'underline'],
        ['image', 'code-block']
      ]
    },
    placeholder: 'Начните ввод текста...',
    theme: 'snow'  // Или 'bubble'
  });
</script>

        <script>
            document.querySelectorAll('.star').forEach(star => {
    star.onclick = () => {
        const value = star.getAttribute('data-value');
        document.querySelectorAll('.star').forEach(innerStar => {
            if (innerStar.getAttribute('data-value') <= value) {
                innerStar.style.color = 'gold';
            } else {
                innerStar.style.color = '#ccc';
            }
        });
    };
});

function submitFeedback() {
    const feedback = document.getElementById('feedbackText').value;
    const rating = document.querySelector('.star[style*="color: gold"]').getAttribute('data-value');
    console.log('Feedback:', feedback, 'Rating:', rating); // Замените на отправку данных на сервер
    closeModal('feedbackModal');
}
        </script>
    </div>
</div>
<script>
function openModal(modalId) {
    var modal = document.getElementById(modalId);
    modal.style.display = "block";
}

function closeModal(modalId) {
    var modal = document.getElementById(modalId);
    modal.style.display = "none";
}

// Закрытие модального окна при клике вне его области
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        event.target.style.display = "none";
    }
}
</script>
</div>
<div id="container">
    <nav class="clear">
            <link rel="stylesheet" type="text/css" media="all" href="/static/style.css"/>
  <ul>
    <li><a href="#"><i class="fas fa-home"></i> На главную</a></li>
       <li><a href="{% url 'appoint_doctor' %}"><i class="fas fa-solid fa-stethoscope"></i> Запись к врачу</a></li>
    <li><a href="#"><i class="fas fa-directions"></i>Активные направления</a></li>
    <li><a href="#"><i class="fas fa-vial"></i> Анализы</a></li>
    <li><a href="#"><i class="fas fa-notes-medical"></i> Платежи и статус ОСМС</a></li>
    <li><a href="{% url 'medical_history' %}"><i class="fas fa-book-medical"></i> Медицинская история</a></li>
      <li><a href='https://i-teka.kz/almaty/medicamentsalphabetically' target="_blank"><i class="fas fa-duotone fa-pills"></i> Поиск лекарств</a></li>
  </ul>
</nav>

    <div id="content">
        <div class="jquery-script-ads">
            <script type="text/javascript"><!--
            google_ad_client = "ca-pub-2783044520727903";
            /* jQuery_demo */
            google_ad_slot = "2780937993";
            google_ad_width = 728;
            google_ad_height = 90;
            //-->
            </script>
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            </script>
        </div>
    </div>
</div>
{% block content %}
<div id="map-container" style="color: #d5d4d4; text-align: center">
    <h2>Клиники на карте Алматы</h2>
    <p>Используйте карту ниже, чтобы найти клиники рядом с вами.</p>
    <div id="map" style="width: 100%; height: 100%;"></div>
</div>


<div class="sidebar" style="font-family: 'Helvetica Neue', Arial, sans-serif; color: #cdcdcd; height: auto">

    <div id="side" style="border: 2px solid #033506; margin: 20px"><h1 style="font-size: 30px; text-align: center;">Добро пожаловать в Ваш личный медицинский портал</h1>
    <p style="padding-left: 25px; padding-right: 10px; font-size: 20px;">Поиск лучших медицинских специалистов, запись на прием и управление вашими медицинскими данными еще никогда не были такими простыми. Наша миссия — наполнить каждый день заботой о вашем благополучии. В портале клиник Алматы каждый шаг к здоровью становится легче и доступнее. Мы обеспечиваем лёгкий доступ к высококачественным медицинским услугам и заботимся о каждом аспекте вашего здоровья. Начните путь к лучшей жизни сегодня. Мы предлагаем безопасный, надежный и быстрый способ управления вашим здоровьем и здоровьем вашей семьи. Наш портал позволяет вам вести электронную историю ваших посещений, управлять медицинскими записями и планировать ваше лечение в удобное для вас время. Мы объединяем высокие технологии и чуткое отношение специалистов, чтобы предоставить вам лучший опыт в уходе за здоровьем. С нами управление вашим здоровьем становится проще и удобнее. Мы предлагаем инновационный подход к медицинской помощи и здоровому образу жизни.</p>
    </div>
    <div class="display-flex-colm" style="display: flex">
<div id="attach" onclick="requireLogin('attach-page')">
  <div class="text-and-image">
    <img src="/media/removebg.png" style="width: 320px; height: 250px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Оформить прикрепление к поликлинике</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    <div id="attach" style="background-color: #018c65" onclick="requireLogin('attach-page')">
  <div class="text-and-image">
    <img src="/media/preview.png" style="width: 350px; height: 200px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Быстро и легко: проверьте анализы онлайн</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    </div>
    
    <div class="display-flex-colm" style="display: flex">
<div id="attach" style="background-color: #018c65" onclick="requireLogin('appoint_doctor')">
  <div class="text-and-image">
    <img src="/media/img.png" style="width: 350px; height: 300px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Запись к врачу за один клик — позаботьтесь о своем здоровье</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    <div id="attach" onclick="window.open('https://i-teka.kz/almaty/medicamentsalphabetically', '_blank');">
  <div class="text-and-image">
    <img src="/media/drogue.png" style="width: 300px; height: 200px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Найдите нужные медикаменты за секунды</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    </div>
        <div class="display-flex-colm" style="display: flex">
<div id="attach" onclick="requireLogin('attach-page')">
  <div class="text-and-image">
    <img src="/media/img_1.png" style="width: 320px; height: 220px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Управляйте своими медицинскими направлениями легко и удобно</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    <div id="attach" onclick="requireLogin('attach-page')" style="background-color: #018c65">
  <div class="text-and-image">
    <img src="/media/img_2.png" style="width: 320px; height: 200px;"> <!-- Replace with your image path -->
    <p style="font-size: 25px;">Проверьте вашу медицинскую страховку за мгновение</p>
  </div>
  <div class="arrow-wrapper">
    <svg class="arrow-svg" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <line x1="5" y1="25" x2="45" y2="25" stroke="white" stroke-width="2"/>
      <polyline points="35,15 45,25 35,35" fill="none" stroke="white" stroke-width="2"/>
    </svg>
  </div>
</div>
    </div>
    
  <div id="myModal" class="modal">
        <div class="modal-content">
            <i id="close-modal" class="far fa-window-close" onclick="closeModal('myModal')"></i>
            <p style="border: 1px solid #0b520e; padding: 15px; text-align: center;">Уважаемый пользователь</p>

<p style="border: 1px solid #0b520e; padding: 15px; text-align: center;">Для выполнения этого действия в системе требуется авторизация. Пожалуйста, войдите в свой аккаунт или зарегистрируйтесь, если у вас еще нет учетной записи. Это позволит вам получить доступ ко всем функциям и возможностям нашего сервиса.</p>
        </div>
          <script>
     function requireLogin(url) {
    if (!isUserAuthenticated) {
        openModal('myModal');
    } else {
        window.location.href = url; // Перенаправление на заданный URL, если пользователь авторизован
    }
}
    </script>
    </div>
<div class="news-tips-slider" style="cursor: pointer;">
    {% for slide in slides %}
    <div class="slide-container">
        <div class="slide" style="background-image: url('{{ slide.image.url }}');" onclick="window.open('{{ slide.source }}', '_blank');">
            <div class="slide-content">
                <h2 style="color: #07f1ae">{{ slide.title }}</h2>
                <p>{{ slide.description }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
</div>
    <script>
document.addEventListener('DOMContentLoaded', function () {
    const slideContainers = document.querySelectorAll('.slide-container'); // Обращаемся к контейнерам

    function checkVisibility() {
        const triggerBottom = window.innerHeight / 5 * 4;

        slideContainers.forEach(container => {
            const slideTop = container.getBoundingClientRect().top;
            if (slideTop < triggerBottom) {
                container.classList.add('visible');
            } else {
                container.classList.remove('visible');
            }
        });
    }

    window.addEventListener('scroll', checkVisibility);
    checkVisibility(); // Проверка при загрузке страницы
});
    </script>
{% endblock content %}


 <div style="clear: both;"></div>
<div class="end-content" style="border-top: 1.5px solid #0b520e">
<div class="footer-container">
  <div class="menu-section">
    <h3>Главное</h3>
    <ul>
        <li><a href="{% url 'appoint_doctor' %}"><i class="fas fa-solid fa-stethoscope"></i> Запись к врачу</a></li>
    <li><a href="#"><i class="fas fa-directions"></i> Активные направления</a></li>
    <li><a href="#"><i class="fas fa-vial"></i>Анализы</a></li>
    <li><a href="#"><i class="fas fa-notes-medical"></i>Статус ОСМС</a></li>
    <li><a href="#"><i class="fas fa-book-medical"></i> Медицинская история</a></li>
      <li><a href='https://i-teka.kz/almaty/medicamentsalphabetically' target="_blank"><i class="fas fa-duotone fa-pills"></i> Поиск лекарств</a></li>
    </ul>
  </div>
  <div class="social-section">
    <h3>Я в социальных сетях</h3> <!-- Если нужен заголовок для социальных сетей -->
    <ul>
        <li><a href="https://www.instagram.com/unique_vern/" target="_blank"><i class="fab fa-instagram"></i> Instagram</a></li>
        <li><a href="https://www.linkedin.com/in/esbol-zholdasbai-008abb221" target="_blank"><i class="fab fa-linkedin-in"></i> LinkedIn</a></li>
        <li><a href="https://t.me/Xodnd99" target="_blank"><i class="fab fa-telegram-plane"></i> Telegram</a></li>
        <li><a href="mailto:esbolyegizekov@gmail.com?subject=Inquiry from Your Website&body=Hello,%0D%0AI am contacting you from your website and would like to inquire about...%0D%0A%0D%0ABest regards," target="_blank"><i class="fas fa-envelope"></i> esbolyegizekov@gmail.com</a></li>
  </ul>
  </div>
</div>
    <div class="solid-line"></div>
    <div class="educational-disclaimer">
    <p>Внимание: Содержимое данного сайта разработано исключительно в образовательных целях и представляет собой дипломный проект. Этот сайт не является официальным источником медицинских данных или информации и не должен использоваться в качестве основы для принятия медицинских решений.</p>
    <p>Пожалуйста, всегда обращайтесь к квалифицированным медицинским работникам для получения надежной медицинской информации и консультаций. Вся информация, представленная здесь, предназначена для демонстрации навыков веб-разработки и не предполагает профессиональные медицинские рекомендации.</p>
    <p><img src="/media/Logotip-AUYES-na-angl.png" class="img-logo"></p>
    </div>
</div>
</div>
    <script>
function toggleMenu() {
    var dropdown = document.getElementById("dropdown");
    var userName = document.querySelector(".user-name");

    // Установка ширины dropdown равной ширине userName
    dropdown.style.width = `${userName.offsetWidth}px`;

    dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
}


function closeMenu() {
    var dropdown = document.getElementById("dropdown");
    dropdown.style.display = "none";
}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/static/jquery.hamburger.js"></script>
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36251023-1']);
    _gaq.push(['_setDomainName', 'jqueryscript.net']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

    function showUserMenu() {
        document.getElementById("userMenu").classList.remove("hidden");
    }

    function hideUserMenu() {
        document.getElementById("userMenu").classList.add("hidden");
    }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Получаем ссылки на кнопки "Войти" и "Регистрация"
        var loginLink = document.querySelector('a[href*="registration/login.html/?tab=login"]');
        var registerLink = document.querySelector('a[href*="registration/login.html/?tab=signup"]');

        // Добавляем обработчик события клика на ссылку "Войти"
        if (loginLink) {
            loginLink.addEventListener('click', function (event) {
                // Предотвращаем стандартное действие ссылки
                event.preventDefault();
                // Перенаправляем пользователя на login.html с параметром tab=login
                window.location.href = 'registration/login.html?tab=login';
            });
        }

        // Добавляем обработчик события клика на ссылку "Регистрация"
        if (registerLink) {
            registerLink.addEventListener('click', function (event) {
                // Предотвращаем стандартное действие ссылки
                event.preventDefault();
                // Перенаправляем пользователя на login.html с параметром tab=signup
                window.location.href = 'registration/login.html?tab=signup';
            });
        }
    });
</script>
{% block scripts %}
    
 <script src="https://api-maps.yandex.ru/2.1/?apikey=ea4321bf-6d4f-4032-b6f7-487f44829a40&lang=ru_RU" type="text/javascript"></script>
    <script type="text/javascript">
        var isUserAuthenticated = {{ request.user.is_authenticated|yesno:"true,false" }};
    </script>
    <script type="text/javascript">
    var currentRoute; 
        ymaps.ready(init);

        function init() {
            var map = new ymaps.Map('map', {
                center: [43.238293, 76.945465], // Координаты центра карты (например, центр города)
                zoom: 14
            });

            // Создаем коллекцию для хранения меток
            var placemarks = new ymaps.GeoObjectCollection();
            // Получаем координаты города Алматы
            ymaps.geocode('Алматы').then(function (res) {
                var bounds = res.geoObjects.get(0).properties.get('boundedBy');
                // Фильтр по категориям медицинских организаций
                var categories = ['Городская поликлиника', 'Взрослые поликлиники', 'Поликлиника', 'Клиника', 'Медцентр', 'Детская поликлиника', 'Поликлиника для взрослых', 'Поликлиника для взрослых, детская поликлиника', 'Медцентр, клиника', 'Поликлиника для взрослых, филиал'];

                // Поиск медицинских организаций в городе Алматы по категориям
                categories.forEach(function (category) {
                    ymaps.search(category, {
                        boundedBy: bounds,
                        provider: 'yandex#search'
                    }).then(function (res) {
                        res.geoObjects.each(function (geoObject) {                            
                            var coords = geoObject.geometry.getCoordinates();
                            var name = geoObject.properties.get('name'); // Получаем название организации
                            var address = geoObject.properties.get('address'); // Получаем описание организации
                            var url = geoObject.properties.get('url'); // Получаем ссылку на сайт организации
                            var phoneNumbers = geoObject.properties.get('phoneNumbers');
                            var hours = geoObject.properties.get('companyMetaData.Hours');
                            var ext_id = geoObject.properties.get('companyMetaData').id;
                            var hoursText = hours ? hours.text : 'Не указано';
                            var placemark = new ymaps.Placemark(coords, {}, {
                                preset: 'islands#redDotIconWithCaption'
                            });
                            var postData = {
                                name: geoObject.properties.get('name'),
                                address: geoObject.properties.get('address'),
                                url: geoObject.properties.get('url'),
                                phoneNumbers: geoObject.properties.get('phoneNumbers').join(', '),  // Соединяем телефоны в строку
                                hoursText: hoursText,
                                ext_id: ext_id
                            };
                            // Отправляем данные
                            sendDataToDjango(postData);
                            // Добавляем метку на карту и в коллекцию
                            map.geoObjects.add(placemark);
                            placemarks.add(placemark);

                            // Создаем информационное окно организации и добавляем кнопку "Прикрепиться"
                            function createBalloonContent(name, address, url, phoneNumbers, hoursText) {
                                var balloonContent = '<div>' + address + '</div>';
                                if (url) {
                                    balloonContent += '<div class="link-container"><span style="margin-right: 5px;">&#x1F310;</span><a href="' + url + '" target="_blank">' + url + '</a></div>';
                                }

                                if (phoneNumbers && phoneNumbers.length > 0) {
                                    // Показываем только первый номер и кнопку для раскрытия остальных
                                    balloonContent += '<div class="phone-container">';
                                    balloonContent += '<span style="margin-right: 5px;">&#x260E;</span>' + phoneNumbers[0];
                                    balloonContent += '</div>';
                                }

                                balloonContent += '<div class="balloon-schedule"><span style="margin-right: 7px;">&#x1F550;</span>' + hoursText + '</div>';
                                balloonContent += '<div><button id="showRouteButton" style="display: flex; align-items: center; justify-content: center; background-color: #0078d4; margin-bottom: 8px; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;"><svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m8.82929429 20c-.41183641 1.1651924-1.52307546 2-2.82929429 2-1.65685425 0-3-1.3431458-3-3s1.34314575-3 3-3c1.30621883 0 2.41745788.8348076 2.82929429 2h8.67070571c1.3807119 0 2.5-1.1192881 2.5-2.5s-1.1192881-2.5-2.5-2.5h-11c-2.48528137 0-4.5-2.0147186-4.5-4.5 0-2.48528137 2.01471863-4.5 4.5-4.5h3.08578644l-1.29289322-1.29289322 1.41421356-1.41421356 3.70710682 3.70710678-3.70710682 3.70710678-1.41421356-1.41421356 1.29289322-1.29289322h-3.08578644c-1.38071187 0-2.5 1.11928813-2.5 2.5s1.11928813 2.5 2.5 2.5h11c2.4852814 0 4.5 2.0147186 4.5 4.5s-2.0147186 4.5-4.5 4.5zm-2.82929429-2c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1 1-.4477153 1-1-.44771525-1-1-1zm12-16c1.6568542 0 3 1.34314575 3 3s-1.3431458 3-3 3-3-1.34314575-3-3 1.3431458-3 3-3zm0 2c-.5522847 0-1 .44771525-1 1s.4477153 1 1 1 1-.44771525 1-1-.4477153-1-1-1z" fill-rule="evenodd" fill="white"/></svg> Показать маршруты</button></div>';
                                balloonContent += '<div><button id="attachButton" style="background-color: #0078d4;  color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer;">Прикрепиться</button></div>';

                                return balloonContent;
                            }

                            function openBalloon(coords, name, address, url, phoneNumbers, hoursText) {
                                if (currentRoute) {
                                    map.geoObjects.remove(currentRoute);
                                    currentRoute = null;
                                }
                                map.balloon.open(coords, {
                                    contentHeader: name,
                                    contentBody: createBalloonContent(name, address, url, phoneNumbers, hoursText)
                                }, {
                                    // Включаем опцию автоматического контроля отступов
                                    adjustMapMargin: true
                                });
                                var clinicExtId = ext_id;
                                // Добавляем обработчики событий после того, как баллун открыт
                                setTimeout(function () {
                                    var attachButton = document.getElementById('attachButton');
                                    if (attachButton) {
                                        attachButton.addEventListener('click', function () {
                                            if (!isUserAuthenticated) {
                                                // Добавляем сообщение об ошибке в баллун
                                                var balloonData = map.balloon.getData();
                                                balloonData.contentBody += '<div style="color: red;">Пожалуйста, авторизуйтесь для выполнения этого действия.</div>';
                                                map.balloon.setData(balloonData);
                                                // Пересчитываем размер баллуна
                                                map.balloon.update();
                                            } else {
                                                window.location.href = 'attach-page';
                                            }
                                        });
                                    }
                                    var showRouteButton = document.getElementById('showRouteButton');
                                    if (showRouteButton) {
                                        showRouteButton.addEventListener('click', function () {
                                            // Сначала закрываем баллун
                                            map.balloon.close();

                                            // Затем удаляем предыдущий маршрут, если он существует
                                            if (currentRoute) {
                                                map.geoObjects.remove(currentRoute);
                                                currentRoute = null;
                                            }
                                            navigator.geolocation.getCurrentPosition(function (position) {
                                                var userLocation = [position.coords.latitude, position.coords.longitude];
                                                ymaps.route([userLocation, coords]).then(function (route) {
                                                    currentRoute = route;
                                                    map.geoObjects.add(route);

                                                    // Получаем границы первого пути маршрута
                                                    var bounds = route.getPaths().get(0).getBounds();

                                                    setTimeout(function () {
                                                        map.setBounds(bounds, {
                                                            checkZoomRange: true,
                                                            duration: 500
                                                        }).then(function () {
                                                            if (map.getZoom() > 10) {
                                                                map.setZoom(10);
                                                            }
                                                        }, function (err) {
                                                            console.log(err);
                                                        });
                                                    }, 0);
                                                });
                                            }, function (error) {
                                                alert('Не удалось получить местоположение: ' + error.message);
                                            });
                                        });
                                    }
                                });
                            }


                            placemark.events.add('click', function () {
                                openBalloon(coords, name, address, url, phoneNumbers, hoursText);
                            });


                            // Добавляем обработчик события mouseenter для метки
                            placemark.events.add('mouseenter', function () {
                                // Показываем название организации при наведении на метку
                                placemark.properties.set('iconCaption', name);
                            });

                            // Добавляем обработчик события mouseleave для метки
                            placemark.events.add('mouseleave', function () {
                                // Убираем название организации при уходе курсора с метки
                                placemark.properties.set('iconCaption', '');
                            });
                        });
                    });
                });

                // Добавляем коллекцию меток на карту
                map.geoObjects.add(placemarks);
            });

            function sendDataToDjango(postData) {
                var csrftoken = getCookie('csrftoken');  // Получите CSRF токен

                // Отправка POST-запроса к Django
                fetch('/save_organization/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrftoken
                    },
                    body: JSON.stringify(postData)
                })
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.error('Error:', error));
            }

            // Получение CSRF токена из cookie
            function getCookie(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        }
    </script>
{% endblock scripts %}
</body>
</html>


